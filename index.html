<!DOCTYPE html>
<html>

<head>
    <title> Weather App </title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="maka.css" rel="stylesheet" />
</head>

<body>
    <h2>
        <div class="alert alert-danger" role="alert">
            Weather Forecast here!
        </div>
    </h2>
    <h1>
        <!--b3090c4d10124a92bc72bc826a815035-->
        <p>Click the button to get your coordinates.</p>

        <div class="button">
        <button onclick="getLocation()"> Get Location </button>
        </div>
        <p id="demo"></p>

        <script>
            var x = document.getElementById("demo");

            function getLocation() {
                if (navigator.geolocation) {
                    let location = navigator.geolocation.getCurrentPosition(showPosition);
                } else {
                    x.innerHTML = "Geolocation is not supported by this browser.";
                }
            }

            function showPosition(position) {
                fetch(
                        `http://api.weatherbit.io/v2.0/current?key=b3090c4d10124a92bc72bc826a815035&lat=${position.coords.latitude}&lon=${position.coords.longitude}`
                    )
                    .then(res => res.json()).then(data => {
                    console.log(data)
                    /*Object.keys(data.data[0]).forEach(value => {
                        console.log(value);
                        x.innerHTML += "<br>" + data.data[0][value] + "</br>";
                    
                    });*/
                    x.innerHTML = "<br> " + data.data[0].city_name + " " + data.data[0].state_code + " " + data.data[0].country_code;
                    x.innerHTML += "<br> Temperature: " + data.data[0].app_temp + " Celcius" + "<br> Precipitation: " + data.data[0].precip;
                    x.innerHTML += "<br> Sunrise: " + data.data[0].sunrise + " Sunset: " + data.data[0].sunset;
                    x.innerHTML += "<br> Weather Description: " + data.data[0].weather.description;
                    });
            }
        </script>
    </h1>

</body>

</html>